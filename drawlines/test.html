<html>
	<head>
	<style>
	.line{
		position: absolute;
	}
	</style>
	</head>
	<body>
	</body>
	<script src="../lib/jquery.js"></script>
	<script>
		var $timeline_container=$('body');
		var line_width=4;
		var timeline_speed=500;
		var drawline=function(start,type,length,time,callback_data){
		  	var id ='c_'+new Date().getTime()
	      	var line = "<div id='"+id+"'class='line'>&nbsp;</div>";
	     	$timeline_container.append(line);
	     	if(type==='horizontal'){
				$('#'+id).css({
				left: start.x+"px",
				top: start.y+"px",
				width: 0+"px",
				height:line_width+"px",
				position:'absolute',
				backgroundColor: "red"
				});
				var left=length<0?(start.x+length):start.x;
				if(callback_data){
					$('#'+id).animate({left:left+"px",width:Math.abs(length)+"px"},time*1000,"linear",function(){drawline({x:start.x+length,y:start.y},callback_data.type,callback_data.line_length,callback_data.time,callback_data.callback_data)});
				}
				else{
					$('#'+id).animate({width:length+"px"},time*1000,"linear");
				}

	      	}
	      	if(type==='vertical'){
				$('#'+id).css({
				left: start.x+"px",
				top: start.y+"px",
				height: 0+"px",
				width:line_width+"px",
				position:'absolute',
				backgroundColor: "red"
				});
				var top=length<0?(start.y+length):start.y;
				if(callback_data){
					$('#'+id).animate({top:top+"px",height:Math.abs(length)+"px"},time*1000,"linear",function(){drawline({x:start.x,y:start.y+length},callback_data.type,callback_data.line_length,callback_data.time,callback_data.callback_data)});
				}
				else{
					$('#'+id).animate({height:length+"px"},time*1000,"linear");
				}
	      	}
	    }
		var data={
			start:{x:200,y:200},
			details:[{
				type:'horizontal',
				line_length:40,
				time:.5
			},
			{
				type:'vertical',
				line_length:-40,
				time:.5
			},
			{
				type:'horizontal',
				line_length:-40,
				time:.5
			},
			{
				type:'vertical',
				line_length:-40,
				time:.5
			},
			{
				type:'horizontal',
				line_length:-40,
				time:.5
			},
			{
				type:'horizontal',
				line_length:-40,
				time:.5
			},
			{
				type:'vertical',
				line_length:-40,
				time:.5
			},
			{
				type:'horizontal',
				line_length:-40,
				time:.5
			},
			{
				type:'horizontal',
				line_length:-40,
				time:1
			},
			{
				type:'vertical',
				line_length:40,
				time:1
			},
			{
				type:'vertical',
				line_length:40,
				time:1
			},
			{
				type:'horizontal',
				line_length:400,
				time:1
			}]
		}
		var draw_animated_lines=function(data){
			var details=data.details;
			var build=details[0];
			for(i=1;i<details.length;i++){
				if(1||typeof details[i-1].time==='undefined'){
					details[i-1].time=Math.abs(details[i-1].line_length)/timeline_speed;
				}
				details[i-1].callback_data=details[i];
			}
			drawline(data.start,details[0].type,details[0].line_length,details[0].time,details[0].callback_data);
		}
		$(function(){
			draw_animated_lines(data);
			
		})
	</script>
</html>